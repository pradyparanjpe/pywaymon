**************
CONFIGURATION
**************

We use `XDGPSPCONF <https://pradyparanjpe.gitlab.io/xdgpspconf/index.html>`__.

Briefly, a file named ``${XDG_CONFIG_HOME:-${HOME}/.config}/pywaymon/config.yml`` may hold configuration.

Sections
=========

Tooltip
---------
Tooltip format section.

max
^^^^
This sub-section restricts table dimensions (value type: *int*) by rows (key: ``row``) and columns (key: ``col``).

.. _SEPCONF:

sep
^^^^
When :ref:`combining tooltips<COMBINE>`, tables are separated using this character. Default: ``│``


Tooltip classes
^^^^^^^^^^^^^^^^

Tooltip classes are pre-defined classes of tooltip text which may be styled using pango markup.
*Pywaymon* recognises following tooltip classes.

- ``title`` (Tooltip title)
- ``text`` (Plain paragraph text)
- ``row_name`` (Table row names)
- ``col_name`` (Table column names)
- ``word`` (Table cell)

.. tip::
   The user must set color and styles which they think are compatible with their css `tooltip <https://github.com/Alexays/Waybar/wiki/Styling/9c4f6a764f5469d08d6a20695121156ee93dd3e5#minimal-style>`__.

Each tooltip-class may be provided with span attributes recognised by `pango markup <https://docs.gtk.org/Pango/pango_markup.html>`__.
*Pywaymon* recognises an additional key *clip* to restrict the class content length by charaters.

.. warning::
   ``#`` denotes either hex-color or beginning of comment (in e.g. yaml format).
   Remember to quote hex-colors (e.g. ``"#1f2e3d"``).

Module sections
------------------
Each waybar :ref:`custom module<MODULES>` generated by *pywaymon* may be configured for some common keys and some keys specifically recognised by that module.

Common keys
^^^^^^^^^^^^

lowest
~~~~~~~
If the value of ``lowest`` is set as a percentage between 0 and 100, the module is displayed only if the ``percentage`` value is greater than the set value.
If not set, the module module is always shown.

tip_type
~~~~~~~~~
Type of tooltip that is displayed on mouse-hover.
For compatible tip-types, check `usage <usage.html#list>`__

.. _interval_conf:

loop_interval
~~~~~~~~~~~~~~
When set to float value (in seconds), the module assumes  :ref:`daemon mode<daemon_call>` by default with supplied periodicity.
To force exit after printing a single test output for a module configured with `loop_interval`, the command call ought to be supplied with ``-i 0``.

Specific keys
^^^^^^^^^^^^^^

.. table ::
    :class: longtable

    ============= ============ ================================================
    Module        Variable     Description
    ============= ============ ================================================
    netcheck      internet     A known reachable ip address located
                               in the internet, outside the intranet.
    temperature   ambient      Average ambient temperature in ℃
    temperature   alarming     Default alarming temperature in ℃
    netio         ignore_below Don't display value below this absolute rate.
    netio         promise      Rate promised by internet service provider (ISP)
                               in bytes/second.
    ============= ============ ================================================


.. tip::
   - ``ignore-below`` is not the same as ``lowest`` as it doesn't check for *percentage*.
   - ISPs usually promise rate in bits/second.
     ``8 bits = 1 byte``

Example
========

This is the Default.

.. tabs::

   .. tab:: yaml

      .. literalinclude:: ../src/pywaymon/config.yml
         :language: yaml
         :caption: default config

   .. tab:: toml

        .. code-block:: toml

            [tooltip]
            sep = "│"

            [tooltip.max]
            row = 12
            col = 10
            
            [tooltip.title]
            color = "#ffafaf"
            weight = "bold"
            underline = "double"
            
            [tooltip.row_name]
            color = "#ffffaf"
            
            [tooltip.col_name]
            color = "#afffaf"
            
            [tooltip.word]
            clip = 15
            
            [tooltip.text]
            clip = 78
            
            [IO]
            tip_type = "disks + pids"
            
            [processor]
            # lowest: $ echo "100/$(nproc)" | bc
            tip_type = "processors + pids"
            
            [memory]
            tip_type = "device + pids"
            
            [temperature]
            ambient = 27  # Temperature in degrees Celsius
            
            [netcheck]
            internet = "8.8.8.8"  # Google's DNS as an indicator of connection to internet
            
            [netio]
            ignore_below = 1_024  # [= 1kB/s] Ignore below this speed (bytes/s)

