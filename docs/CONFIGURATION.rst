**************
CONFIGURATION
**************

We use `XDGPSPCONF <https://pradyparanjpe.gitlab.io/xdgpspconf/index.html>`__.

Briefly, a file named ``${XDG_CONFIG_HOME:-${HOME}/.config}/pywaymon/config.yml`` may hold configuration.

Sections
=========

Tooltip
---------
Tooltip format section.

max
^^^^
This sub-section restricts tooltip table dimensions (value type: *int*) by rows (key: ``row``) and columns (key: ``col``).

.. _SEPCONF:

clip
^^^^^
Characters in :ref:`Tooltip classes <TIPCLASSES>` can be restricted by setting their limits in this sub-section.

sep
^^^^
When :ref:`combining tooltips<COMBINE>`, tables are separated using this character. Default: ``│``

Module sections
------------------
Each *waybar* :ref:`custom module<MODULES>` generated by *pywaymon* may be configured for some common keys and some keys specifically recognised by that module.

Common keys
^^^^^^^^^^^^

lowest
~~~~~~~
If the value of ``lowest`` is set as a percentage between 0 and 100, the module is displayed only if the ``percentage`` value is greater than the set value.
If not set, the module module is always shown.

tip_type
~~~~~~~~~
Type of tooltip that is displayed on mouse-hover.
For compatible tip-types, check `usage <usage.html#list>`__

.. _interval_conf:

loop_interval
~~~~~~~~~~~~~~
When set to float value (in seconds), the module assumes  :ref:`daemon mode<daemon_call>` by default with supplied periodicity.
To force exit after printing a single test output for a module configured with `loop_interval`, the command call ought to be supplied with ``-i 0``.


.. _specific_keys:

Specific keys
^^^^^^^^^^^^^^

.. table ::
    :class: longtable

    ============= ===== ============ ================================================
    Module        Type  Variable     Description
    ============= ===== ============ ================================================
    temperature   int   ambient      Average ambient temperature in ℃
    temperature   int   alarming     Default alarming temperature in ℃
    load                ignore_below Don't display value below these absolute loads.
                  obj                Keys: 1, 5, 15 min, values: int
    netio         int   ignore_below Don't display value below this absolute rate.
    netio         int   promise      Rate promised by internet service provider (ISP)
                                     in bytes/second.
    ============= ===== ============ ================================================

.. tip::
   - ``ignore-below`` is not the same as ``lowest`` as it checks for absolute values, not *percentage*.
   - ISPs usually promise rate in bits/second.
     ``8 bits = 1 byte``

netcheck
~~~~~~~~~

.. versionadded:: 0.0.3

- ``internet``: A known reachable ip address located in the internet, outside the intranet.
- ``home_ap``: A space-separated list of IP known to respond to ping, located `at home`.
- ``work_ap``: A space-separated list of IP known to respond to ping, located `at work`, but not at home.
- ``hotspot_ap``: A space-separated list of IP known to respond to ping when connected to hotspot.
- ``home_mac``: A space-separated list of MAC addresses of known to serve AP `at home`.
- ``work_mac``: A space-separated list of MAC addresses of known to serve AP `at work`.
- ``hotspot_mac``: A space-separated list of MAC addresses of known to serve AP on hotspot.
 

Example
========

This is the Default.

.. tabs::

   .. tab:: yaml

      .. literalinclude:: ../src/pywaymon/config.yml
         :language: yaml
         :caption: default config

   .. tab:: toml

        .. code-block:: toml

           [tooltip]
           sep = "│"

             [tooltip.max]
             row = 12
             col = 10

             [tooltip.clip]
             cell = 15
             text = 78

           [IO]
           tip_type = "disks + pids"

           [processor]
           # lowest: $ echo "100/$(nproc)" | bc
           tip_type = "processors + pids"

           [memory]
           tip_type = "device + pids"

           [temperature]
           ambient = 27  # Temperature in degrees Celsius

           [load.ignore_below]
           1 = 12  # nprocs
           5 = 9   # nprocs * 0.75
           10 = 6  # nprocs * 0.5

           [netcheck]
           internet = "8.8.8.8"  # Google's DNS as an indicator of connection to internet
           home_ap = [ "192.168.1.1" ]

           [netio]
           ignore_below = 1_024  # [= 1kB/s] Ignore below this speed (bytes/s)


******************
Pango Style Sheet
******************

.. _TIPCLASSES:

Tooltip classes
================

Tooltip classes are pre-defined types of tooltip text.
Tooltip classes may be styled with span attributes recognised by `pango markup <https://docs.gtk.org/Pango/pango_markup.html>`__ in a ``style.css`` file located in the same directory as the configuration file.
*Pywaymon* recognises following tooltip classes.

- ``title`` (Tooltip title)
- ``text`` (Plain paragraph text)
- ``row-name`` (Table row names)
- ``col-name`` (Table column names)
- ``cell`` (Table cell)

.. important::
   The *tooltip* selector in *waybar's* ``style.css`` determine the global style of the tooltip frame.
   Tooltip classes in *pywaymon's*  ``style.css`` only printed characters.


Example
========

.. literalinclude:: ../src/pywaymon/style.css
   :language: css
   :caption: default style

